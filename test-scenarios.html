<!DOCTYPE html>
<html>
<head>
  <title>Test Scenarios - China Order System</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      max-width: 1200px;
      margin: 30px auto;
      padding: 20px;
      background: #000;
      color: #fafafa;
    }
    h1 {
      color: #60a5fa;
      margin-bottom: 10px;
    }
    .subtitle {
      color: #a1a1aa;
      margin-bottom: 30px;
      font-size: 14px;
    }
    .scenario-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    .scenario-card {
      background: #18181b;
      border: 2px solid #27272a;
      border-radius: 12px;
      padding: 24px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .scenario-card:hover {
      border-color: #60a5fa;
      transform: translateY(-2px);
    }
    .scenario-card.loaded {
      border-color: #22c55e;
      background: rgba(34, 197, 94, 0.05);
    }
    .scenario-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 8px;
      color: #fafafa;
    }
    .scenario-subtitle {
      font-size: 13px;
      color: #a1a1aa;
      margin-bottom: 16px;
    }
    .scenario-stats {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 16px;
      padding-top: 16px;
      border-top: 1px solid #27272a;
    }
    .stat {
      font-size: 12px;
    }
    .stat-label {
      color: #71717a;
      margin-bottom: 4px;
    }
    .stat-value {
      font-size: 16px;
      font-weight: bold;
      font-family: monospace;
    }
    .critical { color: #ef4444; }
    .warning { color: #facc15; }
    .healthy { color: #22c55e; }
    .info { color: #60a5fa; }
    .success {
      margin-top: 20px;
      padding: 15px;
      background: rgba(34, 197, 94, 0.1);
      border: 1px solid #22c55e;
      border-radius: 8px;
      color: #22c55e;
      font-size: 14px;
    }
    .instructions {
      margin-top: 30px;
      padding: 20px;
      background: rgba(37, 99, 235, 0.1);
      border: 1px solid #1e40af;
      border-radius: 8px;
      font-size: 14px;
      line-height: 1.8;
    }
    .instructions h3 {
      color: #60a5fa;
      margin-top: 0;
      margin-bottom: 12px;
    }
    .instructions ul {
      margin: 0;
      padding-left: 20px;
    }
    .instructions li {
      margin-bottom: 8px;
    }
    .tag {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: 600;
      margin-top: 8px;
    }
    .tag-test { background: rgba(96, 165, 250, 0.2); color: #60a5fa; }
    .tag-edge { background: rgba(234, 179, 8, 0.2); color: #facc15; }
    .tag-extreme { background: rgba(239, 68, 68, 0.2); color: #ef4444; }
  </style>
</head>
<body>
  <h1>üß™ Test Scenarios - China Order System</h1>
  <div class="subtitle">Click any scenario to load it into Slot 1, then open the app to test</div>

  <div class="scenario-grid">
    <!-- Scenario A: Existing Test Data -->
    <div class="scenario-card" onclick="loadScenario('A')">
      <div class="scenario-title">üìä Scenario A: Mid-Season Crisis</div>
      <div class="scenario-subtitle">6 months since last container. King/Queen critically low.</div>
      <div class="tag tag-test">BASELINE TEST</div>
      <div class="scenario-stats">
        <div class="stat">
          <div class="stat-label">King Coverage</div>
          <div class="stat-value critical">2.6 mo</div>
        </div>
        <div class="stat">
          <div class="stat-label">Queen Coverage</div>
          <div class="stat-value critical">2.5 mo</div>
        </div>
        <div class="stat">
          <div class="stat-label">Double Coverage</div>
          <div class="stat-value healthy">9.0 mo</div>
        </div>
        <div class="stat">
          <div class="stat-label">Expected Critical</div>
          <div class="stat-value info">King Single</div>
        </div>
      </div>
    </div>

    <!-- Scenario B: Balanced Start -->
    <div class="scenario-card" onclick="loadScenario('B')">
      <div class="scenario-title">‚öñÔ∏è Scenario B: Balanced Start</div>
      <div class="scenario-subtitle">All sizes at ~3 months coverage. Test if order maintains balance.</div>
      <div class="tag tag-test">BALANCE TEST</div>
      <div class="scenario-stats">
        <div class="stat">
          <div class="stat-label">All Sizes</div>
          <div class="stat-value warning">~3.0 mo</div>
        </div>
        <div class="stat">
          <div class="stat-label">Test Goal</div>
          <div class="stat-value info">Stay Balanced</div>
        </div>
        <div class="stat">
          <div class="stat-label">Expected Critical</div>
          <div class="stat-value info">Tie Breaker</div>
        </div>
        <div class="stat">
          <div class="stat-label">Success If</div>
          <div class="stat-value healthy">¬±1 mo spread</div>
        </div>
      </div>
    </div>

    <!-- Scenario C: Double Crisis -->
    <div class="scenario-card" onclick="loadScenario('C')">
      <div class="scenario-title">üö® Scenario C: Small Size Emergency</div>
      <div class="scenario-subtitle">Double completely out of medium. Others healthy.</div>
      <div class="tag tag-edge">EDGE CASE</div>
      <div class="scenario-stats">
        <div class="stat">
          <div class="stat-label">Double Medium</div>
          <div class="stat-value critical">0 mo</div>
        </div>
        <div class="stat">
          <div class="stat-label">King/Queen</div>
          <div class="stat-value healthy">6+ mo</div>
        </div>
        <div class="stat">
          <div class="stat-label">Expected Critical</div>
          <div class="stat-value info">Double</div>
        </div>
        <div class="stat">
          <div class="stat-label">Test</div>
          <div class="stat-value warning">1 pallet enough?</div>
        </div>
      </div>
    </div>

    <!-- Scenario D: Extreme Imbalance -->
    <div class="scenario-card" onclick="loadScenario('D')">
      <div class="scenario-title">üí• Scenario D: Extreme Imbalance</div>
      <div class="scenario-subtitle">King firm at 0, medium at 200. Test dynamic allocation.</div>
      <div class="tag tag-extreme">EXTREME</div>
      <div class="scenario-stats">
        <div class="stat">
          <div class="stat-label">King Firm</div>
          <div class="stat-value critical">0 mo</div>
        </div>
        <div class="stat">
          <div class="stat-label">King Medium</div>
          <div class="stat-value healthy">7.9 mo</div>
        </div>
        <div class="stat">
          <div class="stat-label">Test</div>
          <div class="stat-value info">Need-based?</div>
        </div>
        <div class="stat">
          <div class="stat-label">Expected</div>
          <div class="stat-value warning">All Firm</div>
        </div>
      </div>
    </div>

    <!-- Scenario E: N+2 Strategy -->
    <div class="scenario-card" onclick="loadScenario('E')">
      <div class="scenario-title">üéØ Scenario E: N+2 Strategy Test</div>
      <div class="scenario-subtitle">Two small sizes critical. Test 2-pallet allocation.</div>
      <div class="tag tag-test">N+2 TEST</div>
      <div class="scenario-stats">
        <div class="stat">
          <div class="stat-label">Double Medium</div>
          <div class="stat-value critical">1.5 mo</div>
        </div>
        <div class="stat">
          <div class="stat-label">Single Medium</div>
          <div class="stat-value critical">1.2 mo</div>
        </div>
        <div class="stat">
          <div class="stat-label">Expected Allocation</div>
          <div class="stat-value info">1 each</div>
        </div>
        <div class="stat">
          <div class="stat-label">Remaining</div>
          <div class="stat-value warning">6 pallets</div>
        </div>
      </div>
    </div>

    <!-- Scenario F: All Critical -->
    <div class="scenario-card" onclick="loadScenario('F')">
      <div class="scenario-title">üî• Scenario F: Everything Critical</div>
      <div class="scenario-subtitle">All sizes under 2 months. Test prioritization logic.</div>
      <div class="tag tag-extreme">EXTREME</div>
      <div class="scenario-stats">
        <div class="stat">
          <div class="stat-label">All Sizes</div>
          <div class="stat-value critical">&lt;2 mo</div>
        </div>
        <div class="stat">
          <div class="stat-label">Test</div>
          <div class="stat-value warning">Who gets priority?</div>
        </div>
        <div class="stat">
          <div class="stat-label">Expected</div>
          <div class="stat-value info">Smallest wins</div>
        </div>
        <div class="stat">
          <div class="stat-label">Result</div>
          <div class="stat-value critical">Still unbalanced</div>
        </div>
      </div>
    </div>
  </div>

  <div id="result"></div>

  <div class="instructions">
    <h3>üìã Testing Instructions</h3>
    <ol style="margin: 0; padding-left: 20px;">
      <li><strong>Click a scenario card</strong> to load it into Slot 1</li>
      <li><strong>Open the app</strong>: <a href="http://localhost:5176" style="color: #60a5fa; font-weight: bold;">http://localhost:5176</a></li>
      <li><strong>Load the scenario</strong>: Click "üíæ Save/Load" ‚Üí "Load" on Slot 1</li>
      <li><strong>Navigate to "Inventory Runway"</strong> tab</li>
      <li><strong>Analyze the results</strong>:
        <ul style="margin-top: 8px;">
          <li>Look at "After Container" coverage (month 3 column)</li>
          <li>Check if runways are balanced (similar coverage months)</li>
          <li>Note which firmnesses run out first (red cells)</li>
          <li>Calculate variance (max coverage - min coverage)</li>
        </ul>
      </li>
      <li><strong>Document findings</strong> in test-verification.md</li>
    </ol>

    <div style="margin-top: 16px; padding: 12px; background: rgba(239, 68, 68, 0.1); border: 1px solid #991b1b; border-radius: 6px;">
      <strong style="color: #ef4444;">‚ö†Ô∏è Key Question to Answer:</strong><br>
      Does the algorithm balance runways so all sizes deplete at similar times, or does it prioritize addressing the largest needs regardless of final balance?
    </div>
  </div>

  <script>
    // Scenario data
    const scenarios = {
      A: {
        name: "Scenario A: Mid-Season Crisis",
        inventory: {
          springs: {
            firm: { King: 25, Queen: 30, Double: 18, 'King Single': 6, Single: 3 },
            medium: { King: 45, Queen: 60, Double: 28, 'King Single': 12, Single: 4 },
            soft: { King: 8, Queen: 12, Double: 8, 'King Single': 4, Single: 2 }
          },
          components: {
            micro_coils: { King: 80, Queen: 90, Double: 0, 'King Single': 0, Single: 0 },
            thin_latex: { King: 120, Queen: 140, Double: 0, 'King Single': 0, Single: 0 },
            felt: { King: 60, Queen: 85, Double: 20, 'King Single': 10, Single: 5 },
            top_panel: { King: 55, Queen: 75, Double: 18, 'King Single': 8, Single: 3 },
            bottom_panel: { King: 50, Queen: 70, Double: 15, 'King Single': 6, Single: 2 },
            side_panel: { King: 45, Queen: 65, Double: 25, 'King Single': 0, Single: 0 }
          }
        },
        settings: { palletCount: 8, smallSizePallets: 1, exportFormat: 'optimized' }
      },

      B: {
        name: "Scenario B: Balanced Start",
        inventory: {
          springs: {
            firm: { King: 12, Queen: 16, Double: 4, 'King Single': 1, Single: 1 },
            medium: { King: 76, Queen: 102, Double: 11, 'King Single': 6, Single: 2 },
            soft: { King: 2, Queen: 5, Double: 3, 'King Single': 2, Single: 0 }
          },
          components: {
            micro_coils: { King: 100, Queen: 120, Double: 0, 'King Single': 0, Single: 0 },
            thin_latex: { King: 100, Queen: 120, Double: 0, 'King Single': 0, Single: 0 },
            felt: { King: 50, Queen: 70, Double: 15, 'King Single': 8, Single: 3 },
            top_panel: { King: 50, Queen: 70, Double: 15, 'King Single': 8, Single: 3 },
            bottom_panel: { King: 50, Queen: 70, Double: 15, 'King Single': 8, Single: 3 },
            side_panel: { King: 50, Queen: 70, Double: 20, 'King Single': 0, Single: 0 }
          }
        },
        settings: { palletCount: 8, smallSizePallets: 1, exportFormat: 'optimized' }
      },

      C: {
        name: "Scenario C: Small Size Emergency (Double Medium = 0)",
        inventory: {
          springs: {
            firm: { King: 80, Queen: 110, Double: 8, 'King Single': 10, Single: 5 },
            medium: { King: 152, Queen: 203, Double: 0, 'King Single': 12, Single: 4 },
            soft: { King: 12, Queen: 24, Double: 7, 'King Single': 4, Single: 2 }
          },
          components: {
            micro_coils: { King: 150, Queen: 200, Double: 0, 'King Single': 0, Single: 0 },
            thin_latex: { King: 150, Queen: 200, Double: 0, 'King Single': 0, Single: 0 },
            felt: { King: 100, Queen: 130, Double: 10, 'King Single': 12, Single: 5 },
            top_panel: { King: 100, Queen: 130, Double: 10, 'King Single': 12, Single: 5 },
            bottom_panel: { King: 100, Queen: 130, Double: 10, 'King Single': 12, Single: 5 },
            side_panel: { King: 100, Queen: 130, Double: 30, 'King Single': 0, Single: 0 }
          }
        },
        settings: { palletCount: 8, smallSizePallets: 1, exportFormat: 'optimized' }
      },

      D: {
        name: "Scenario D: Extreme Imbalance (King Firm = 0, Medium = 200)",
        inventory: {
          springs: {
            firm: { King: 0, Queen: 22, Double: 8, 'King Single': 5, Single: 3 },
            medium: { King: 200, Queen: 203, Double: 22, 'King Single': 12, Single: 4 },
            soft: { King: 4, Queen: 10, Double: 7, 'King Single': 4, Single: 2 }
          },
          components: {
            micro_coils: { King: 150, Queen: 200, Double: 0, 'King Single': 0, Single: 0 },
            thin_latex: { King: 150, Queen: 200, Double: 0, 'King Single': 0, Single: 0 },
            felt: { King: 100, Queen: 130, Double: 20, 'King Single': 12, Single: 5 },
            top_panel: { King: 100, Queen: 130, Double: 20, 'King Single': 12, Single: 5 },
            bottom_panel: { King: 100, Queen: 130, Double: 20, 'King Single': 12, Single: 5 },
            side_panel: { King: 100, Queen: 130, Double: 30, 'King Single': 0, Single: 0 }
          }
        },
        settings: { palletCount: 8, smallSizePallets: 1, exportFormat: 'optimized' }
      },

      E: {
        name: "Scenario E: N+2 Strategy (Two Small Sizes Critical)",
        inventory: {
          springs: {
            firm: { King: 80, Queen: 110, Double: 5, 'King Single': 10, Single: 1 },
            medium: { King: 152, Queen: 203, Double: 5, 'King Single': 12, Single: 0 },
            soft: { King: 12, Queen: 24, Double: 7, 'King Single': 4, Single: 2 }
          },
          components: {
            micro_coils: { King: 150, Queen: 200, Double: 0, 'King Single': 0, Single: 0 },
            thin_latex: { King: 150, Queen: 200, Double: 0, 'King Single': 0, Single: 0 },
            felt: { King: 100, Queen: 130, Double: 10, 'King Single': 12, Single: 3 },
            top_panel: { King: 100, Queen: 130, Double: 10, 'King Single': 12, Single: 3 },
            bottom_panel: { King: 100, Queen: 130, Double: 10, 'King Single': 12, Single: 3 },
            side_panel: { King: 100, Queen: 130, Double: 30, 'King Single': 0, Single: 0 }
          }
        },
        settings: { palletCount: 8, smallSizePallets: 2, exportFormat: 'optimized' }
      },

      F: {
        name: "Scenario F: Everything Critical",
        inventory: {
          springs: {
            firm: { King: 8, Queen: 11, Double: 2, 'King Single': 1, Single: 0 },
            medium: { King: 38, Queen: 51, Double: 7, 'King Single': 3, Single: 1 },
            soft: { King: 1, Queen: 3, Double: 2, 'King Single': 1, Single: 0 }
          },
          components: {
            micro_coils: { King: 40, Queen: 50, Double: 0, 'King Single': 0, Single: 0 },
            thin_latex: { King: 40, Queen: 50, Double: 0, 'King Single': 0, Single: 0 },
            felt: { King: 30, Queen: 40, Double: 8, 'King Single': 5, Single: 2 },
            top_panel: { King: 30, Queen: 40, Double: 8, 'King Single': 5, Single: 2 },
            bottom_panel: { King: 30, Queen: 40, Double: 8, 'King Single': 5, Single: 2 },
            side_panel: { King: 30, Queen: 40, Double: 15, 'King Single': 0, Single: 0 }
          }
        },
        settings: { palletCount: 8, smallSizePallets: 1, exportFormat: 'optimized' }
      }
    };

    function loadScenario(id) {
      const scenario = scenarios[id];

      const saveData = {
        name: scenario.name,
        timestamp: new Date().toISOString(),
        data: {
          inventory: scenario.inventory,
          settings: scenario.settings
        }
      };

      // Save to localStorage
      localStorage.setItem('china_order_save_1', JSON.stringify(saveData));

      // Visual feedback
      document.querySelectorAll('.scenario-card').forEach(card => {
        card.classList.remove('loaded');
      });
      event.currentTarget.classList.add('loaded');

      // Show success message
      document.getElementById('result').innerHTML = `
        <div class="success">
          ‚úÖ <strong>${scenario.name}</strong> loaded into Slot 1!<br><br>
          Now open <a href="http://localhost:5176" style="color: #22c55e; font-weight: bold;">http://localhost:5176</a><br>
          Click "üíæ Save/Load" ‚Üí "Load" on Slot 1, then check the Runway tab
        </div>
      `;
    }
  </script>
</body>
</html>
